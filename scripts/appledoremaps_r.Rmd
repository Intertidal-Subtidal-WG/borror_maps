---
title: "mappos"
output: html_document
---

```{r setup, include=FALSE}
library(ggplot2)
library(ggmap)
library(tidyverse)
```


```{r load data}
ct_data <- read.csv('~/Documents/GitHub/geospatial/data/ct_clean.csv')
transect_info <- read.csv('~/Documents/GitHub/geospatial/data/transects/transect_info_decimals.csv')
```

```{r base map}
#lets make a base map

#bboxfinder results: -70.620060,42.983899,-70.608237,42.993709
apple_bb <- c(left = -70.62,
            bottom = 42.9832,
            right = -70.6085,
            top = 42.9933)

#set up the map, will download the required images
apple_toner <- get_stamenmap(bbox = apple_bb, zoom = 14, maptype = "toner-lite")
ggmap(apple_toner)

#terrain will be too low res
#apple_terrain <- get_stamenmap(bbox = apple_bb, zoom = 13, maptype = "terrain-background")
#ggmap(apple_terrain)
```
```{r}
test_point <- data.frame(lat = 42.987867, lon = -70.616167)
#,22,24,26,28


apple_points <- ggmap(apple_toner) +
  geom_point(data = transect_info, aes( x = dec_long, y = dec_lat, color = 'red'), show.legend = FALSE) +
  theme_classic() +
    theme(axis.ticks = element_blank(),
        axis.text = element_blank()) +
  labs(color = NULL, title = NULL, x = NULL, y = NULL)

apple_points

#ggsave("20210303appledore_intertidal.pdf", plot = last_plot(), device = "pdf")
```

```{r add coords}
#modify ct_data to have transect coordinates and be what we want. 

#remove random columns and filter to only the counted ones
ct_data2 <- ct_data[, !colnames(ct_data) %in% c('X.1','X')]
ct_data2 <- ct_data2 %>% filter(Count > 0)

#subset transect info to what I want
transect_info2 <- transect_info %>% select(Transect, dec_lat, dec_long, Position)

#add the coordinates
ct_combine <- merge(ct_data2, transect_info2, all.x = TRUE)
```
  
```{r}
#going to pick a species, lets go with urchins to start since we know they disappear
#	Strongylocentrotus droebachiensis



```

